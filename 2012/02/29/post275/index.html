<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录生活与工作的点点滴滴"><title>XuDing的音符v1.3 | XuDing的音符</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">XuDing的音符v1.3</h1><a id="logo" href="/.">XuDing的音符</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">XuDing的音符v1.3</h1><div class="post-meta">Feb 29, 2012<span> | </span><span class="category"><a href="/categories/往事随风/">往事随风</a></span></div><div class="post-content"><p>这两天心情不好，写点代码调节调节，把首页更新了下。</p>
<p>前一段时间发现了个HTML5的jquery效果，发现它可以在非IE下播放声音，于是看了下HTML5的audio标签，觉得可以尝试一下，测试的时候还是可行的，但是重复播放音符的时候还是会出问题，不知道是不是现在的浏览器对HTML5支持不够好。。反正我的IE9不支持，于是就来了个判断，在IE下还使用object，非IE下用audio。所以目前的情况，只能先在IE下用用了。。</p>
<p>对代码做了大幅修改，现在看起来，还蛮有点复杂的，有时出点问题，看半天都看不出来。测试的时候，浏览器那是死个不停，有时候突然不出声了，找了好长时间，也没找出问题，结果浏览器关了，发现任务管理器里还有好多浏览器进程-_-!!，唉，都卡死这么多了。。连续播放这么多这么短的音符文件，浏览器比较有压力啊。。</p>
<p>现在还有个莫明奇妙的问题令我十分纠结，打开右侧闪烁的图标，打开键盘钢琴模式，输入乐谱，然后可以点输入框右下角的播放器按钮，要是在重播的时候点右边的图标退出键盘钢琴（再点一次播放器按钮可停止播放），这时候正常情况下应当是从头开始播放默认的歌曲（现在设的是《致爱丽斯》、《北京欢迎你》、《青花瓷》、《哆啦A梦》），现在也确实是这样子的，不过播放的速度着实快得发疯了，要是这时点两下左边的按钮暂停再播放，又正常了，真是莫名其妙。播放音符使用的是setTimeout的递归调用，音符与音符之间的间隔是全局变量控制的，是固定不变的，根本没有对它进行操作。同学说是不是有两个曲子在同时播放，我放慢了仔细听，确实是一个曲子，没有重复播放，为何会这么快呢？实在想不明白，情不自禁地怀疑是不是浏览器溢出了。还是先放一放吧，因为我正在设计个新的播放器，可以尽可能地缩短音符之间的间隔，提高音质。</p>
<p>接下来有些开发计划，除了打算新做个播放器，这个播放器留一个缓冲区，用于动态增加要播放的音符，然后定时清除播放结束的音符节点，有点复杂，具体实现方法还没有想到。。然后基于这个播放器，在乐谱music-data.xml里增加播放速度元素，这样可以播放不同节奏的音乐；顺便增加个播放速度调节功能，用来自定义音乐播放速度。调节速度非常容易，新做个播放器就比较复杂了，近期内肯定完成不了，以后再说吧。</p>
</div><div class="tags"><a href="/tags/技术/">技术</a></div><div class="post-nav"><a class="pre" href="/2012/04/24/post300/">上班的同学</a><a class="next" href="/2012/02/17/post264/">黑客暴利生意：一个黑客的自白[转]</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.xuding.info"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/往事随风/">往事随风</a><span class="category-list-count">34</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/技术/" style="font-size: 15px;">技术</a> <a href="/tags/思考/" style="font-size: 15px;">思考</a> <a href="/tags/吐槽/" style="font-size: 15px;">吐槽</a> <a href="/tags/雅文共赏/" style="font-size: 15px;">雅文共赏</a> <a href="/tags/加班/" style="font-size: 15px;">加班</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/03/28/post603/">从老蒋越级指挥说起</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/14/post602/">用RxJava优雅的执行并发网络请求</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/09/post601/">好久不写博客了</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/21/post600/">Java字节序列化框架</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/26/post580/">自掘坟墓的苹果</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/01/post579/">如何精准沟通</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/11/post578/">技术局限性，任重而道远</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/11/post577/">心怀畏惧</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/11/post570/">论现代企业中考勤制度的必要性</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/12/25/post558/">时间都去哪儿了[转]</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">XuDing的音符.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>